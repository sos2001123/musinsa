<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<script type="text/javascript">

	function selectSubmit() {
		var form = document.createElement('form');
		form.action = '/';
		form.method = 'POST';
		var category = document.getElementById("category");
		category = category.options[category.selectedIndex].value;
		form.innerHTML = '<input name="categoryId" value="' + category + '">';

		document.body.append(form);

		form.submit();
	}
	
	function insertSubmit() {
		var form = document.createElement('form');
		form.action = '/insert';
		form.method = 'POST';
		var category = document.getElementById("category");
		category = category.options[category.selectedIndex].value;
		form.innerHTML = '<input name="categoryId" value="' + category + '">';

		document.body.append(form);

		form.submit();
	}
</script>

<head>
	<meta charset="UTF-8">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>카테고리</title>
</head>

<body>
	<h1>카테고리
	select 박스는 상위 카테고리만 조회
	select 박스 ALL 선택 후 조회시 전체 카테고리 조회
	select 박스에 카테고리 선택 후 조회시 하위 카테고리 조회
	select 박스 선택 후 등록 누르면 선택된 하위 카테고리 등록
	</h1>
	<table>
		<thead>
			<tr>
				<th>카테고리명</th>
				<th></th>
				<th></th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td>
					<select class="select" name="category" id="category">

						<option value="0">ALL</option>
						<option th:each="itemData : ${categoryListSelect}" th:value="${itemData.categoryId}"
							th:text="${itemData.categoryName}"></option>
					</select>
				</td>
			</tr>
			<tr th:each="itemData : ${categoryList}" th:value="${itemData.categoryName}">
				<td th:text="${itemData.categoryName}"> </td>
				<td><a th:href="@{'/delete/'+${itemData.categoryId}}"><button>삭제</button></a></td>
				<td><a th:href="@{'/post/'+${itemData.categoryId}}"><button>수정</button></a></td>
			</tr>
		</tbody>
	</table>
	<a href="javascript:selectSubmit();">조회</a>
	<a href="javascript:insertSubmit();">등록</a>
</body>

</html>